<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Air Cleaner in Your Pocket</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
  html,body{margin:0;background:#0b0f14;color:#e8eef6;font-family:system-ui,Segoe UI,Roboto,Arial,sans-serif}
  header{padding:14px 16px;border-bottom:1px solid #1d2732}
  h1{margin:0;font-size:18px} .sub{color:#a9b9cc;font-size:12px}
  main{padding:12px} .row{display:flex;gap:12px;align-items:center}
  .card{background:#131a21;border:1px solid #1d2732;border-radius:10px;padding:10px}
  label{font-size:12px;color:#a9b9cc} input,select{width:100%}
  input[type=range]{appearance:none;height:4px;background:#1d2732;border-radius:2px;margin-top:6px}
  input[type=range]::-webkit-slider-thumb{appearance:none;width:14px;height:14px;border-radius:50%;background:#35c6ff;border:2px solid #062636}
  .metrics{display:flex;gap:8px;margin-top:8px}
  .metric{flex:1;background:#0f151c;border:1px solid #243140;border-radius:8px;padding:8px;text-align:center}
  .label{font-size:11px;color:#a9b9cc} .val{font-size:14px}
  canvas{width:100%;height:220px;background:#0e141a;border:1px solid #1d2732;border-radius:10px}
  .bad{color:#ffc857} .good{color:#5bd67b}
  .tiny{font-size:11px;color:#a9b9cc;margin-top:8px}
</style>
</head>
<body>
<header>
  <h1>Air Cleaner in Your Pocket</h1>
  <div class="sub">Watch radicals attack pollutants as you change light and humidity.</div>
</header>

<main>
  <div class="card">
    <div class="row">
      <div style="flex:1">
        <label>Photocatalyst</label>
        <select id="mat">
          <option value="tio2">TiO₂ (UV-A)</option>
          <option value="tio2d">TiO₂ (doped, visible)</option>
          <option value="gC3N4">g‑C₃N₄ (visible)</option>
          <option value="zno">ZnO (UV-A)</option>
          <option value="ac">TiO₂ + Activated Carbon</option>
        </select>
      </div>
      <div style="flex:1">
        <label>Light intensity</label>
        <input id="light" type="range" min="0" max="100" value="60">
      </div>
      <div style="flex:1">
        <label>Humidity (%)</label>
        <input id="rh" type="range" min="20" max="80" value="50">
      </div>
    </div>

    <div class="metrics">
      <div class="metric"><div class="label">VOC removal</div><div id="voc" class="val">—</div></div>
      <div class="metric"><div class="label">NOx removal</div><div id="nox" class="val">—</div></div>
      <div class="metric"><div class="label">PM₂.₅ removal</div><div id="pm" class="val">—</div></div>
    </div>
  </div>

  <div class="card" style="margin-top:10px">
    <canvas id="sim" width="600" height="220"></canvas>
    <div class="tiny">Blue dots = radicals; orange dots = pollutants. More light → more radicals. Moderate humidity helps; too high can slow reactions.</div>
  </div>
</main>

<script>
  const mats = {
    tio2:   {voc:[75,90], nox:[55,70], pm:[60,80], rhSens:0.8, vis:0},
    tio2d:  {voc:[70,85], nox:[50,65], pm:[60,75], rhSens:0.6, vis:1},
    gC3N4:  {voc:[65,80], nox:[45,60], pm:[55,75], rhSens:0.5, vis:1},
    zno:    {voc:[55,75], nox:[55,70], pm:[55,70], rhSens:1.0, vis:0},
    ac:     {voc:[85,95], nox:[60,75], pm:[70,90], rhSens:0.7, vis:0}
  };
  const matSel = document.getElementById('mat');
  const light = document.getElementById('light');
  const rh = document.getElementById('rh');
  const vocEl = document.getElementById('voc'), noxEl = document.getElementById('nox'), pmEl = document.getElementById('pm');

  function clamp(x,a,b){ return Math.max(a, Math.min(b, x)); }
  function lerp(a,b,t){ return a + (b-a)*t; }
  function adjRange([lo,hi], rhVal, sens){
    const t = clamp((rhVal-20)/60, 0, 1);
    const shift = (sens*(t-0.5))*0.2; // ±10% width effect
    const mid = (lo+hi)/2, half = (hi-lo)/2 * (1 - Math.abs(shift));
    return [Math.round(mid-half), Math.round(mid+half)];
  }
  function updateMetrics(){
    const m = mats[matSel.value];
    const l = Number(light.value)/100;
    const r = Number(rh.value);
    const vocR = adjRange(m.voc, r, m.rhSens);
    const noxR = adjRange(m.nox, r, m.rhSens);
    const pmR  = adjRange(m.pm,  r, m.rhSens);
    // Light scaling (simple boost for visible-active or UV)
    const boost = m.vis ? lerp(0.9,1.1,l) : lerp(0.85,1.1,l);
    function fmt([a,b]){ a=Math.round(a*boost); b=Math.round(b*boost); return a+'–'+b+' %'; }
    vocEl.textContent = fmt(vocR);
    noxEl.textContent = fmt(noxR);
    pmEl.textContent  = fmt(pmR);
  }

  // Simple particle sim
  const canvas = document.getElementById('sim'), ctx = canvas.getContext('2d');
  const W = canvas.width, H = canvas.height;
  let radicals = [], pollutants = [];
  function resetParticles(){
    radicals = []; pollutants = [];
    const rCount = Math.round(20 + (Number(light.value)/100)*40);
    const pCount = 40;
    for(let i=0;i<rCount;i++) radicals.push({x:Math.random()*W,y:Math.random()*H,vx:(Math.random()-0.5)*1.2,vy:(Math.random()-0.5)*1.2});
    for(let i=0;i<pCount;i++) pollutants.push({x:Math.random()*W,y:Math.random()*H,dead:false});
  }
  function step(){
    ctx.clearRect(0,0,W,H);
    // draw pollutants
    ctx.fillStyle = "#ff9933";
    pollutants.forEach(p=>{
      if(p.dead) return;
      ctx.beginPath(); ctx.arc(p.x,p.y,3,0,6.283); ctx.fill();
    });
    // move radicals and react
    const rhT = clamp((Number(rh.value)-20)/60,0,1);
    const reactK = 0.015 + rhT*0.01; // moderate RH helps a bit
    radicals.forEach(r=>{
      r.x += r.vx; r.y += r.vy;
      if(r.x<0||r.x>W) r.vx*=-1; if(r.y<0||r.y>H) r.vy*=-1;
      // collision / reaction
      pollutants.forEach(p=>{
        if(p.dead) return;
        const dx = r.x-p.x, dy = r.y-p.y;
        if(dx*dx+dy*dy < 25 && Math.random() < reactK){
          p.dead = true;
        }
      });
    });
    // draw radicals
    ctx.fillStyle = "#35c6ff";
    radicals.forEach(r=>{ ctx.beginPath(); ctx.arc(r.x,r.y,2,0,6.283); ctx.fill(); });
    requestAnimationFrame(step);
  }

  function refresh(){
    updateMetrics();
    resetParticles();
  }

  // init
  refresh(); step();
  matSel.addEventListener('change', refresh);
  light.addEventListener('input', refresh);
  rh.addEventListener('input', refresh);
</script>
</body>
</html>
